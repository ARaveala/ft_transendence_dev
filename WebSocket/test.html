$ cat index.html server.js
<html>
  <body>
        <script>
                const webSocket = new WebSocket("ws://localhost:3000/ws");
                const keysDown = [false, false];

                webSocket.onopen = (event) => {
                        console.log("WebSocket connection opened.");
						 webSocket.send(JSON.stringify({
          					type: "greet",
          					message: "Hello from HTML!"
        				}));
						// swapped for type: payload: method, this will let us attatch more data
                        //webSocket.send("Hello!");
                };

                webSocket.onmessage = (event) => {
                        console.log("Received:", event.data);
                };

                webSocket.onclose = (event) => {
                        console.log("WebSocket connection closed.");
                };

                webSocket.onerror = (error) => {
                        console.error("WebSocket error:", error);
                };

                document.addEventListener("keydown", (e) => {
                        if (e.key == "w") keysDown[0] = true;
                        if (e.key == "s") keysDown[1] = true;
                });

                document.addEventListener("keyup", (e) => {
                        if (e.key == "w") keysDown[0] = false;
                        if (e.key == "s") keysDown[1] = false;
                });

                setInterval(() => {
			        webSocket.send(JSON.stringify({
          				type: "move",
          				payload: keysDown
        			}));
                    //    webSocket.send(JSON.stringify(keysDown));
                }, 1000);

        </script>
  </body>
</html>

// server.js (ES module)

import { WebSocketServer } from "ws";

// Create a WebSocket server on port 3000
const wss = new WebSocketServer({ port: 3000 });

wss.on("connection", (ws) => {
  console.log("Client connected!");

  ws.on("message", (message) => {
    console.log("Received from client:", message.toString());
    ws.send("Hello from server!");
  });

  ws.on("close", () => {
    console.log("Client disconnected");
  });

  ws.on("error", (err) => {
    console.error("WebSocket error:", err);
  });
});

console.log("WebSocket server running on ws://localhost:3000");